{
  "title": "Infrastructure Health",
  "tags": ["infrastructure", "monitoring"],
  "timezone": "browser",
  "schemaVersion": 16,
  "version": 0,
  "refresh": "1m",
  "panels": [
    {
      "id": 1,
      "title": "CPU Usage",
      "type": "graph",
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 0},
      "targets": [
        {
          "expr": "100 - (avg by (instance) (irate(node_cpu_seconds_total{mode=\"idle\"}[5m])) * 100)",
          "legendFormat": "{{instance}}",
          "refId": "A"
        }
      ],
      "yaxes": [
        {"format": "percent", "max": 100, "min": 0, "label": "CPU %"},
        {"format": "short"}
      ],
      "legend": {
        "show": true,
        "alignAsTable": true,
        "rightSide": false
      }
    },
    {
      "id": 2,
      "title": "Memory Usage",
      "type": "graph",
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 0},
      "targets": [
        {
          "expr": "100 * (1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes))",
          "legendFormat": "{{instance}}",
          "refId": "A"
        }
      ],
      "yaxes": [
        {"format": "percent", "max": 100, "min": 0, "label": "Memory %"},
        {"format": "short"}
      ],
      "legend": {
        "show": true,
        "alignAsTable": true,
        "rightSide": false
      }
    },
    {
      "id": 3,
      "title": "Disk Usage",
      "type": "graph",
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 8},
      "targets": [
        {
          "expr": "100 - ((node_filesystem_avail_bytes{mountpoint=\"/\"} / node_filesystem_size_bytes{mountpoint=\"/\"}) * 100)",
          "legendFormat": "{{instance}}",
          "refId": "A"
        }
      ],
      "yaxes": [
        {"format": "percent", "max": 100, "min": 0, "label": "Disk %"},
        {"format": "short"}
      ],
      "legend": {
        "show": true,
        "alignAsTable": true,
        "rightSide": false
      }
    },
    {
      "id": 4,
      "title": "System Uptime",
      "type": "stat",
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 8},
      "targets": [
        {
          "expr": "node_time_seconds - node_boot_time_seconds",
          "legendFormat": "{{instance}}",
          "refId": "A"
        }
      ],
      "options": {
        "colorMode": "value",
        "graphMode": "none",
        "orientation": "auto"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "s"
        }
      }
    }
  ]
}
