# NFS exports configuration for Jenkins HA
# Generated by Ansible shared-storage role

{% if shared_storage_type == "nfs" and nfs_server_role | default(false) %}
# Jenkins shared storage export
{{ nfs_export_path | default('/exports') }}/jenkins {{ nfs_client_networks | default('*') }}({{ nfs_export_options | default('rw,sync,no_root_squash,no_subtree_check') }})

# Team-specific exports (if configured)
{% for team in jenkins_teams | default([]) %}
# Team {{ team.team_name }} specific exports
{{ nfs_export_path | default('/exports') }}/jenkins/{{ team.team_name }} {{ nfs_client_networks | default('*') }}({{ nfs_export_options | default('rw,sync,no_root_squash,no_subtree_check') }})
{% endfor %}

# Backup storage export
{{ nfs_export_path | default('/exports') }}/jenkins/backup {{ nfs_client_networks | default('*') }}({{ nfs_export_options | default('rw,sync,no_root_squash,no_subtree_check') }})

# Configuration as Code templates export
{{ nfs_export_path | default('/exports') }}/jenkins/casc_configs {{ nfs_client_networks | default('*') }}({{ nfs_export_options | default('rw,sync,no_root_squash,no_subtree_check') }})

# Management scripts export
{{ nfs_export_path | default('/exports') }}/jenkins/scripts {{ nfs_client_networks | default('*') }}({{ nfs_export_options | default('rw,sync,no_root_squash,no_subtree_check') }})
{% else %}
# NFS server role not enabled or shared storage type is not NFS
# This file will be empty
{% endif %}