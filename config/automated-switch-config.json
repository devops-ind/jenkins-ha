{
  "automation_settings": {
    "global_limits": {
      "max_switches_per_hour": 3,
      "max_switches_per_day": 10,
      "stabilization_period_seconds": 300,
      "validation_timeout_seconds": 180,
      "flapping_threshold": 5,
      "flapping_detection_window_seconds": 1800
    },
    "safety_checks": {
      "circuit_breaker_enabled": true,
      "circuit_breaker_failure_threshold": 3,
      "circuit_breaker_recovery_time_seconds": 300,
      "rate_limiting_enabled": true,
      "flapping_detection_enabled": true,
      "business_hours_enforcement": true,
      "maintenance_window_respect": true
    },
    "validation_settings": {
      "pre_switch_validation_enabled": true,
      "post_switch_validation_enabled": true,
      "backup_before_switch": true,
      "data_sync_required": true,
      "rollback_on_validation_failure": true,
      "health_check_retries": 3,
      "health_check_interval_seconds": 30
    }
  },
  "team_configurations": {
    "devops": {
      "automation_level": "automatic",
      "priority": "high",
      "custom_limits": {
        "max_switches_per_hour": 3,
        "max_switches_per_day": 8,
        "business_hours_only": false
      },
      "switch_triggers": {
        "health_engine_decision": true,
        "sli_threshold_violations": true,
        "log_pattern_detection": true,
        "manual_override": true
      },
      "approval_gates": {
        "production_hours_approval": false,
        "after_hours_approval": false,
        "weekend_approval": false
      },
      "escalation": {
        "notification_channels": ["slack", "email"],
        "escalation_time_minutes": 15,
        "manual_intervention_threshold": 2
      }
    },
    "ma": {
      "automation_level": "assisted",
      "priority": "high",
      "custom_limits": {
        "max_switches_per_hour": 2,
        "max_switches_per_day": 6,
        "business_hours_only": false
      },
      "switch_triggers": {
        "health_engine_decision": true,
        "sli_threshold_violations": true,
        "log_pattern_detection": true,
        "manual_override": true
      },
      "approval_gates": {
        "production_hours_approval": false,
        "after_hours_approval": true,
        "weekend_approval": true
      },
      "escalation": {
        "notification_channels": ["slack", "email", "pagerduty"],
        "escalation_time_minutes": 10,
        "manual_intervention_threshold": 1
      }
    },
    "ba": {
      "automation_level": "assisted",
      "priority": "high",
      "custom_limits": {
        "max_switches_per_hour": 2,
        "max_switches_per_day": 6,
        "business_hours_only": false
      },
      "switch_triggers": {
        "health_engine_decision": true,
        "sli_threshold_violations": true,
        "log_pattern_detection": true,
        "manual_override": true
      },
      "approval_gates": {
        "production_hours_approval": false,
        "after_hours_approval": true,
        "weekend_approval": true
      },
      "escalation": {
        "notification_channels": ["slack", "email", "pagerduty"],
        "escalation_time_minutes": 10,
        "manual_intervention_threshold": 1
      }
    },
    "tw": {
      "automation_level": "automatic",
      "priority": "medium",
      "custom_limits": {
        "max_switches_per_hour": 5,
        "max_switches_per_day": 15,
        "business_hours_only": false
      },
      "switch_triggers": {
        "health_engine_decision": true,
        "sli_threshold_violations": true,
        "log_pattern_detection": true,
        "manual_override": true
      },
      "approval_gates": {
        "production_hours_approval": false,
        "after_hours_approval": false,
        "weekend_approval": false
      },
      "escalation": {
        "notification_channels": ["slack", "email"],
        "escalation_time_minutes": 20,
        "manual_intervention_threshold": 3
      }
    }
  },
  "integration_endpoints": {
    "prometheus": {
      "url": "http://localhost:9090",
      "timeout_seconds": 30,
      "metrics_queries": {
        "error_rate": "rate(jenkins_http_requests_total{team=\"{team}\",status=~\"5..\"}[5m]) / rate(jenkins_http_requests_total{team=\"{team}\"}[5m]) * 100",
        "response_time_p95": "histogram_quantile(0.95, rate(jenkins_http_request_duration_seconds_bucket{team=\"{team}\"}[5m])) * 1000",
        "availability": "avg_over_time(up{team=\"{team}\"}[5m]) * 100",
        "cpu_usage": "avg(rate(container_cpu_usage_seconds_total{container_label_team=\"{team}\"}[5m])) * 100",
        "memory_usage": "avg(container_memory_usage_bytes{container_label_team=\"{team}\"}) / avg(container_memory_limit_bytes{container_label_team=\"{team}\"}) * 100"
      }
    },
    "loki": {
      "url": "http://localhost:3100",
      "timeout_seconds": 30,
      "query_window_minutes": 5
    },
    "grafana": {
      "url": "http://localhost:9300",
      "api_timeout_seconds": 30,
      "annotation_enabled": true
    },
    "jenkins_apis": {
      "devops": "http://devopsjenkins.local.dev:8080",
      "ma": "http://majenkins.local.dev:8081",
      "ba": "http://bajenkins.local.dev:8082",
      "tw": "http://twjenkins.local.dev:8083"
    },
    "haproxy": {
      "container_name": "haproxy-loadbalancer",
      "stats_port": 8404,
      "stats_url": "http://localhost:8404/stats",
      "admin_socket": "/var/run/haproxy/admin.sock"
    }
  },
  "notification_settings": {
    "slack": {
      "enabled": false,
      "webhook_url": "",
      "default_channel": "#jenkins-automation",
      "team_channels": {
        "devops": "#devops-alerts",
        "ma": "#ma-alerts", 
        "ba": "#ba-alerts",
        "tw": "#tw-alerts"
      },
      "message_templates": {
        "switch_started": "üîÑ Automated switch started for team {team}: {from_env} ‚Üí {target_env} (Reason: {reason})",
        "switch_completed": "‚úÖ Automated switch completed for team {team}: {from_env} ‚Üí {target_env} (Duration: {duration}s)",
        "switch_failed": "‚ùå Automated switch failed for team {team}: {from_env} ‚Üí {target_env} (Reason: {failure_reason})",
        "switch_rolled_back": "üîô Automated switch rolled back for team {team}: {target_env} ‚Üí {from_env} (Reason: {rollback_reason})",
        "circuit_breaker_opened": "üö® Circuit breaker opened for team {team} after {failure_count} failures",
        "rate_limit_exceeded": "‚ö†Ô∏è Rate limit exceeded for team {team}: {current_count}/{limit} switches",
        "flapping_detected": "üîÑ Flapping detected for team {team}: {switch_count} switches in {time_window} minutes"
      }
    },
    "email": {
      "enabled": false,
      "smtp_server": "",
      "smtp_port": 587,
      "smtp_username": "",
      "smtp_password": "",
      "from_address": "jenkins-automation@company.com",
      "team_addresses": {
        "devops": ["devops-team@company.com"],
        "ma": ["ma-team@company.com"],
        "ba": ["ba-team@company.com"],
        "tw": ["tw-team@company.com"]
      }
    },
    "pagerduty": {
      "enabled": false,
      "api_url": "https://events.pagerduty.com/v2/enqueue",
      "integration_keys": {
        "devops": "",
        "ma": "",
        "ba": "",
        "tw": ""
      },
      "severity_mapping": {
        "switch_failed": "error",
        "circuit_breaker_opened": "critical",
        "rate_limit_exceeded": "warning",
        "flapping_detected": "warning"
      }
    }
  },
  "monitoring_and_observability": {
    "metrics_export": {
      "enabled": true,
      "prometheus_push_gateway": "http://localhost:9091",
      "metric_prefix": "jenkins_automated_switch",
      "export_interval_seconds": 60
    },
    "audit_logging": {
      "enabled": true,
      "log_file": "/Users/jitinchawla/Data/projects/jenkins-ha/logs/automated-switch-audit.log",
      "log_level": "info",
      "log_rotation": {
        "enabled": true,
        "max_size_mb": 100,
        "max_files": 10
      }
    },
    "health_checks": {
      "self_monitoring": true,
      "health_check_interval_seconds": 300,
      "alert_on_automation_failure": true
    }
  },
  "data_retention": {
    "switch_history_days": 90,
    "automation_stats_days": 30,
    "circuit_breaker_events_days": 14,
    "audit_logs_days": 30
  },
  "backup_and_recovery": {
    "state_backup": {
      "enabled": true,
      "backup_interval_hours": 6,
      "backup_retention_days": 7,
      "backup_location": "/Users/jitinchawla/Data/projects/jenkins-ha/data/backups"
    },
    "disaster_recovery": {
      "automation_state_recovery": true,
      "configuration_recovery": true,
      "manual_override_file": "/tmp/jenkins-automation-manual-override"
    }
  }
}